<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.68.3" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Git Hooks 실습&nbsp;&ndash;&nbsp;/dev/log</title><link rel="stylesheet" href="/css/core.min.e423c83b21da92bb4e8bb830c9f1f244c55526656580aee89a97a9a3286de39f5329f5710761b5118b808bb4ad342ff6.css" integrity="sha384-5CPIOyHakrtOi7gwyfHyRMVVJmVlgK7ompepoyht459TKfVxB2G1EYuAi7StNC/2"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Git Hooks 실습" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">/dev/log</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a></nav></div></span></div></section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Git Hooks 실습</h1><p class="article date">2020-04-12</p></section><article class="article markdown-body"><h1 id="git-hooks">git hooks</h1>
<p>hook 파일 디렉토리는 기본적으로 <code>.git/hooks</code>이다.</p>
<p>hook 파일 이름은 정해져있다. <code>git help hooks</code> 매뉴얼에서 확인 가능하다.</p>
<p>hooks는 'client-side hook'과 'server-side hook'이 있다. 'client-side hook'은 로컬에만 존재하여 원격 저장소에 올라가지 않는다. 따라서 모든 사용자에게 적용할 hook은 'server-side hook'으로 작성해야한다.</p>
<p>이번 실습에서는 'pre-commit'만 시도해보겠다. 'pre-commit'는 파일 이름대로 커밋 이전에 실행된다. 'pre-commit'을 실행한 결과 'exit code'가 0이 아니면 커밋을 중단한다. 주로 커밋 이전에 검증, 그러니까 코드 포맷이나 테스트 케이스를 확인한다.</p>
<p>첫번째로 모든 테스트가 성공적으로 통과한 경우를 실습해보자.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># file: .git/hooks/pre-commit</span>
<span class="c1"># version: 1</span>

make <span class="nb">test</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># file: Makefile
</span><span class="c"></span>
<span class="nf">test</span><span class="o">:</span>
	@echo -en <span class="s2">&#34;Test Pass\n&#34;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% git commit -m <span class="s2">&#34;1&#34;</span>
Test Pass
.
.
.
%
</code></pre></div><p>위와 같은 환경으로 실습해본 결과 테스트  결과가 통과하여 커밋이 진행된다.</p>
<p>두번째로 테스트가 통과하지 못한 경우를 실습해보자.</p>
<div class="highlight"><pre class="chroma"><code class="language-makefile" data-lang="makefile"><span class="c"># file: Makefile
</span><span class="c"></span>
<span class="nf">test</span><span class="o">:</span>
	@echo -en <span class="s2">&#34;Test Fail\n&#34;</span>
	@exit <span class="m">1</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">% git commit -m <span class="s2">&#34;2&#34;</span>
Test Fail
%
</code></pre></div><p>커밋이 중단된다.</p>
<blockquote>
<p>⚠ 커밋이 성공하면 <code>0</code>인, 실패하면 <code>0</code>이 아닌 <code>exit code</code>를 반환한다.</p>
</blockquote>
<p>hooks 기능은 단순히 실행하는 것이고 <code>exit code</code>만 확인하기 때문에 커밋이 중단되더라도 따로 설명하지 않는다.</p>
</article><section class="article labels"><a class="category" href=/categories/git/>git</a></section></div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/article/c/c-float-increment-decrement-operator/"><span class="li iconfont icon-article"></span>C float increment/decrement operator</a></p><p><a class="link" href="/article/c/iso646-trigraphs%EC%99%80-digraphs/"><span class="li iconfont icon-article"></span>ISO646 Trigraphs와 Digraphs</a></p></section></div></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">/dev/log</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></section><script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-e/4/LvThKH1gwzXhdbY2AsjR3rm7LHWyhIG5C0jiRfn8AN2eTN5ILeztWw0H9jmN" crossorigin="anonymous"></script>
        <script
            type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script><script src="/js/hljs.min.0799348a91dce12c6be4a73f943cfe78f181f4e6f6ec35c4af0fca1de377879f77cfab03c30f03a174d675737b5a9314.js" integrity="sha384-B5k0ipHc4Sxr5Kc/lDz&#43;ePGB9Ob27DXErw/KHeN3h593z6sDww8DoXTWdXN7WpMU"></script><script>hljs.initHighlightingOnLoad();</script></body>

</html>